# BancoMasterRouteCalculator
Projeto para teste Banco Master => Criar api que calcule a rota mais economica.

ESTE É UM PROJETO TESTE PARA O BANCO MASTER, QUE TEM COMO OBJETIVO CRIAR UM CRUD DE ROTAS (PONTO A -> PONTO B) COM UM VALOR.
O DESAFIO É ENTRE AS ROTAS EXISTENTES CALCULAR UMA ROTA MAIS ECONOMICA MESMO QUE AUMENTE OS PONTOS DAS ROTAS E DEVOLVER A MELHOR.
PS: FUGI UM POUCO DA PROPOSTA E VOLTEI UMA LISTA DE ROTAS POSSIVEIS RANKEADAS PELO MELHOR VALOR ENTRE ELAS =).

O PROJETO ESTÁ EM .NET CORE 3.1 COM UMA SIMPLIFICAÇÃO DA ABORDAGEM DE DESENVOLVIMENTO DE SOFTWARE "DDD" (DOMAIN-Driven Design).
ACESSO DE DADOS COM ORM (EF CORE 3.1), VALIDAÇÕES COM FLUENT VALIDATION, INJEÇÃO DE DEPENDENCIA, AUTOMAPPER, CODE-FIRST MIGRATION.

AO RODAR O PROJETO A INTERFACE ESTÁ NO SWAGGER.

ALGUNS DETALHES PARA RODAR O PROJETO:

0 - AO CLONAR O SOLUTION O VISUAL STUDIO NORMALMENTE TENDE A BAIXAR AS DEPENDENCIAS DE CADA PROJETO.
1 - O BANCO DE DADOS É SQL E ESTÁ COM EF CORE E COM MIGRATIONS.
2 - PARA CRIAR O BANCO DADOS NO SEU AMBIENTE, É PRECISO ALTERAR A STRING DE CONEXÃO NO ARQUIVO: "appsettings.json" NA CAMADA de Application
3 - DEPOIS DE ALTERADA A CONEXÃO, É PRECISO RODAR OS COMANDOS DO MIGRATIONS
  3.1 - AQUI PODE VARIAR DE CONSOLE (no visual studio, o comando control + aspas abrirá O SEU TERMINAL) OU USE ALGUM DE SUA PREFERENCIAS. 
  3.1.1 SE NO BASH/PowerShell: cd Data (para ir para camada de dados) dotnet ef migrations enable | dotnet ef migrations add InitialCreate | dotnet ef database update
  3.1.2 SE OUTRO, VERIFICAR.
4 - DANDO CERTO TODOS OS COMANDOS, O BANCO TERÁ SIDO CRIADO E O PROJETO PODE SER EXECUTADO PELO IIS OU PELO AMBIENTE DE DEPURAÇÃO DO VISUAL STUDIO.
5 - A INTERFACE SWAGGER MOSTRARÁ OS ENDPOINTS CRUD DE ROTAS E UM ENDPOINT COM A SOLUÇÃO PROPOSTA PARA O DESAFIO, BASTANDO INFORMAR DOIS PONTOS ORIGEM E DESTINO.
  5.1 - CLICAR NO ENDPOINT E DEPOIS EM TRY IT OUT E INFORMAR OS PARAMETROS.

6 - DA SOLUÇÃO E SEUS ASPECTOS TÉCNICOS
  A - CAMADA DE TESTES (0 - Tests) CONTEM UM TESTE SIMPLES COM XUNITE QUE VERIFICA SE O RETORNO DO MOCK É O MESMO DA IMPLEMENTAÇÃO DO SERVIÇO QUE CALCULA A MELHOR ROTA.
  B - AUTOMAPPER DOS OBJETOS QUE VEM DA WEB PARA O BANCO E O QUE VEM DO BANCO PARA QUEM SOLICITOU.
  C - INJEÇÃO DE DEPENDENCIA CONFIGURADAS NO CONTAINER DENTRO DA CLASSE STARTUP.
  D - VALIDAÇÕES SIMPLES PARA INSERT E UPDATE DE DADOS NA CAMADA DE SERVIÇO USANDO FLUENT VALIDATION.
  E - UMA VALIDAÇÃO SEM BIBLIOTECA PARA VERIFICAR SE A ROTA A SER INSERIDA JÁ EXISTE.
  F - CRIANDO UM ENUM NA CAMADA DE DOMINIO QUE CONTEM ALGUMAS ROTAS ALÉM DAS QUE JÁ EXISTIAM QUE SÓ PERMITEM NOVOS INSERTS SE EXISTIREM NESTE ENUM (VALIDAÇÃO PELO FLUENT VALIDATION). 
  G - NA CAMADA DE DATA CRIEI UMA PASTA PARA COLOCAR AS QUERIES, NELA ESTÁ A QUERY QUE É PASSADA PELO ENTITY PARA TRAZER AS ROTAS RANKEADAS.
  H - A CAMADA CROSSCUTTING ESTÁ VAZIA, MAS SERVERIA PARA IMPLEMENTAÇÕES QUE POSSAM SER USADAS POR TODAS AS OUTRAS CAMADAS, COMO LOG E ETC.
